Client Profile ExampleCloudera Docs
Client Profile Example
The following are usage examples that show how the Stellar API can be used to read
    profiles generated by the Metron Profiler. This API would be used in conjunction with other
    Stellar functions like MAAS_MODEL_APPLY to perform model scoring on streaming data.
These examples assume a profile has been defined called ‘snort-alerts’ that tracks the
        number of Snort alerts associated with an IP address over time. The profile definition might
        look similar to the following.
{
  "profiles": [
    {
      "profile": "snort-alerts",
      "foreach": "ip_src_addr",
      "onlyif":  "source.type == 'snort'",
      "update":  { "s": "STATS_ADD(s, 1)" },
      "result":  "STATS_MEAN(s)"
    }
  ]
}
During model scoring, the entity being scored, in this case a particular IP address,
        will be known. The following examples shows how this profile data might be retrieved.
        Retrieve all values of ‘snort-alerts’ from ‘10.0.0.1’ over the past 4 hours.
PROFILE_GET('snort-alerts', '10.0.0.1', PROFILE_FIXED(4, 'HOURS'))
Retrieve all values of ‘snort-alerts’ from ‘10.0.0.1’ over the past 2 days.
PROFILE_GET('snort-alerts', '10.0.0.1', PROFILE_FIXED(2, 'DAYS'))
If the profile had been defined to group the data by weekday versus weekend, then the
        following example would apply:
Retrieve all values of ‘snort-alerts’ from ‘10.0.0.1’ that occurred on ‘weekdays’ over
        the past 30 days.
PROFILE_GET('snort-alerts', '10.0.0.1', PROFILE_FIXED(30, 'DAYS'), ['weekdays'] )
The client may need to use a configuration different from the current Client
        configuration settings. For example, perhaps you are on a cluster shared with other
        analysts, and need to access a profile that was constructed 2 months ago using different
        period duration, while they are accessing more recent profiles constructed with the
        currently configured period duration. For this situation, you may use the
          config_overrides argument:
Retrieve all values of ‘snort-alerts’ from ‘10.0.0.1’ over the past 2 days, with no
          groupBy, and overriding the usual global client configuration parameters for
        window duration.
PROFILE_GET('profile1', 'entity1', PROFILE_FIXED(2, 'DAYS', {'profiler.client.period.duration' : '2', 'profiler.client.period.duration.units' : 'MINUTES'}), [])
Retrieve all values of ‘snort-alerts’ from ‘10.0.0.1’ that occurred on ‘weekdays’ over
        the past 30 days, overriding the usual global client configuration parameters for window
        duration.
PROFILE_GET('profile1', 'entity1', PROFILE_FIXED(30, 'DAYS', {'profiler.client.period.duration' : '2', 'profiler.client.period.duration.units' : 'MINUTES'}), ['weekdays'] )

Parent topic: Accessing Profiles