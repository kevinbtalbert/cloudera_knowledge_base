Tuning a Batch Indexing TopologyCloudera Docs
Tuning a Batch Indexing
        Topology
Indexing is primarily IO driven. Tuning indexing tends to focus on the search index
        (Solr or Elasticsearch). Problems with indexing running too slow will often manifest as
        Kafka not committing in time. This results from the indexing backing up so that it fails
        batches and the poll interval in Kafka is exceeded. The issue is actually with the index
        rather than Kafka.
Test Batch Indexing Topology SettingsWhile the parameters for the Batch Indexing topology should be modified via Ambari for       persistence, there is a method by which the topologies can be started via the command line on       the Metron node and parameters easily modified for testing. The commands below demonstrate how       to create a copy of the Metron files for making changes quickly during testing.Tune Batch Indexing Kafka PartitionsThe first batch indexing variable that should be determined is the minimum number of       Kafka partitions required. Storm Index ParametersYou can modify various Storm indexing properties using Ambari. The HDFS sync policy is       not currently managed by Ambari. To accommodate the HDFS sync policy setting, modify the Flux       file directly.Tune Batch Indexing Core Storm SettingsYou can set the number of Kafka spouts to match the number of Kafka partitions. You       can also increase the number of workers and ackers to match the Storm nodes, unless the       estimated throughput for the parser is very low.Tune Additional Batch Indexing Storm SettingsAfter the number of executors has been determined and thoroughly tested, you can set       or modify the last remaining Storm parameters.Modifying Index Parameters Using Flux (Advanced)Some of the tuning indexing properties, for example the HDFS sync policy setting, can       only be modified using Flux. However, if you manually change your Flux file, if you perform an       upgrade, Ambari will overwrite all of your changes. Be sure to back up your Flux changes prior       to performing an upgrade.