Installing and configuring HMS MirrorCloudera Docs
Installing and configuring HMS Mirror
You can perform the migration when HMS Mirror is installed on the HDP cluster. 
You download, install, and configure HMS Mirror software. Configuration consists of
            generating and customizing an HMS Mirror config file in YAML format. For example, you
            set the path of the hcfsNamespace, which is the HDFS file system path. 


Remove any previous installation of HMS Mirror. For example, as root run the
                    following command. rm -f /usr/local/hms-mirror/lib/*.jar. For
                    more information, see setup.sh generated by a dry run of HMS Mirror.>>
On the HDP cluster, from the Ambari configuration in /etc/ambari-server conf,
                    get the hcfsNamespace.
On the CDP One cluster, get the path to S3 object storage. 
On the CDP One cluster, get the HiveServer (HS2) URI from the SaaS
                    interface.
On the CDP One cluster, get the Java KeyStore (jks) file name and path
                    to set the sslTrustStore.



On the source HDP cluster, go to https://github.com/cloudera-labs/hms-mirror.
                

Download the HMS Mirror distribution, and extract the files.

Go to a directory other than the HMS Mirror installation directory.
You should not run HMS Mirror from the directory where you installed the software.

Generate a config file .hms-mirror/cfg/default.yaml using the -setup
                    option.

hms-mirror -setup

The config file is generated. 
            
                    




Scroll to the cluster information about both LEFT (HDP) and RIGHT (CDP) clusters at the bottom of 
                    the file.

Enter Boolean values for legacyHive to identify the source cluster.
For example: 

On the LEFT (HDP) cluster, set legacyHive: true


On the RIGHT (CDP) cluster, you set legacyHive: false



On the RIGHT cluster, enter the hostname and port for S3 object storage. 
For example: S3a://bucket_name/path

Enter the HiveServer (HS2) server name and port for the jdbc url of the LEFT
                    source HDP cluster.
For example, jdbc:hive2://<hs2 server name>: 10000
                    

Enter the HiveServer URI of the RIGHT destination CDP cluster, including the
                    sslTrustStore path and trustStorePassword.
The URI looks something like
                    this:"jdbc:hive2://saas/testing-master0.dmx:443/;ssl=true;transportMode=http:httpPath=saas-testing/cdp-proxy-token/hive;sslTrustStore=/root/cert/gateway-client-trust.jks;trustStorePassword=changeit;"

Save changes to the YAML config.


Parent topic: Migration prerequisites