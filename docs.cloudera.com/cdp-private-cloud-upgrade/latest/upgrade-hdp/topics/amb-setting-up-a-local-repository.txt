Setting up a local repositoryCloudera Docs
Setting up a local repository
You need to set up a local repository, update the version repository base URLs, and edit the repository configuration file.
As a first step, you must set up a local repository for Ambari and HDP. For more information, see
      set up a local repository.
A case-study of setting up local repositories: Case study for setting up a local repo
When the local repository is created, update the version repository base urls in Ambari. For more information, see update the version repository base urls.
Finally, edit the repository configuration file to use this new local repository. For more
      information, see edit the repository configuration
        filenoteYou can use the case studies to set up a local repository for all of the
        7.1.x versions. For example, the case studies in this section help you to set up a local
        repository for the 7.1.7 version.

Updating Ambari repo filesSome services depend on components that are installed from the Ambari repository. It is not updated automatically. Also, Package Manager displays an error about the unavailable repository URL when you update the package lists. Cloudera recommends you to manually update the URLs located at /etc/yum.repos.d/ambari.repo on all hosts (including server host).Updating HDP repo filesWhen the cluster settings for the HDP repository URL is updated, repository files on     hosts are not immediately regenerated. The files are re-generated when you add a new component     or service. But an inaccessible repository URL causes the Package Manager to display an error     about the unavailable repository URL when you update the package lists. Cloudera recommends you     to manually update the URLs in the HDP repository files (for example,     /etc/yum.repos.d/ambari-hdp-1.repo) on all agent hosts. Case study for setting up an HDP-GPL local repositoryIf the cluster is using the GPL components, you must replace the HDP-GPL repository URL with a local repository.Setting up local repository with temporary internet accessYou must have completed the Getting Started Setting up a Local Repository     procedure.Case study for setting up local repositoryReview this case study to understand - how to prepare a local repository for Ambari 7.1.x.x and HDP 7.1.x.x on Centos7:Update version repository base urlsUse Admin/Versions/Repositories to provide URLs for your source     repositories.Preparing Ambari Repository Configuration File to use Local RepositoryYou must prepare the Ambari Repository Configuration File to use the Local     Repository.Parent topic: Upgrading Ambari