



Operating System Known Issues | 5.x | Cloudera Documentation














































 Documentation


Products
Services & Support
Solutions









Cloudera Enterprise 5.x Release Notes





CDH 5
Release NotesKnown Issues in CDH 5








View All Categories

Cloudera Enterprise 5.x Release Notes
Requirements and Supported Versions
Hardware Requirements Guide
Version and Download Information

Updating an existing CDH/Cloudera Manager deployment to access downloads with authentication
Cloudera Manager Version and Download Information
CDH Version and Packaging Information

CDH Download Information

CDH 5.16.x Download Information
CDH 5.15.x Download Information
CDH 5.14.x Download Information
CDH 5.13.x Download Information
CDH 5.12.x Download Information
CDH 5.11.x Download Information
CDH 5.10.x Download Information
CDH 5.9.x Download Information
CDH 5.8.x Download Information
CDH 5.7.x Download Information
CDH 5.6.x Download Information
CDH 5.5.x Download Information
CDH 5.4.x Download Information
CDH 5.3.x Download Information
CDH 5.2.x Download Information
CDH 5.1.x Download Information
CDH 5.0.x Download Information


CDH 5 Packaging and Tarball Information

CDH 5.16.x Packaging and Tarball Information
CDH 5.15.x Packaging and Tarball Information
CDH 5.14.x Packaging and Tarball Information
CDH 5.13.x Packaging and Tarball Information
CDH 5.12.x Packaging and Tarball Information
CDH 5.11.x Packaging and Tarball Information
CDH 5.10.x Packaging and Tarball Information
CDH 5.9.x Packaging and Tarball Information
CDH 5.8.x Packaging and Tarball Information
CDH 5.7.x Packaging and Tarball Information
CDH 5.6.x Packaging and Tarball Information
CDH 5.5.x Packaging and Tarball Information
CDH 5.4.x Packaging and Tarball Information
CDH 5.3.x Packaging and Tarball Information
CDH 5.2.x Packaging and Tarball Information
CDH 5.1.x Packaging and Tarball Information
CDH 5.0.x Packaging and Tarball Information


Using the CDH 5 Maven Repository

Managing Hadoop API Dependencies in CDH 5
Maven Artifacts for CDH 5.16.x Releases
Maven Artifacts for CDH 5.15.x Releases
Maven Artifacts for CDH 5.14.x Releases
Maven Artifacts for CDH 5.13.x Releases
Maven Artifacts for CDH 5.12.x Releases
Maven Artifacts for CDH 5.11.x Releases
Maven Artifacts for CDH 5.10.x Releases
Maven Artifacts for CDH 5.9.x Releases
Maven Artifacts for CDH 5.8.x Releases
Maven Artifacts for CDH 5.7.x Releases
Maven Artifacts for CDH 5.6.x Releases
Maven Artifacts for CDH 5.5.x Releases
Maven Artifacts for CDH 5.4.x Releases
Maven Artifacts for CDH 5.3.x Releases
Maven Artifacts for CDH 5.2.x Releases
Maven Artifacts for CDH 5.1.x Releases
Maven Artifacts for CDH 5.0.x Releases




Cloudera Navigator Key Trustee Server Version and Download Information
Cloudera Navigator Key HSM Version and Download Information
Key Trustee KMS Version and Download Information
HSM KMS Version and Download Information
Cloudera Navigator Encrypt Version and Download Information
Impala Version and Download Information


What's New in Cloudera Documentation
CDH 5 Release Notes

New Features and Changes in CDH 5

What's New in CDH 5.16.x
What's New in CDH 5.15.x
What's New in CDH 5.14.x
What's New in CDH 5.13.x
What's New in CDH 5.12.x
What's New in CDH 5.11.x
What's New in CDH 5.10.x
What's New In CDH 5.9.x
What's New In CDH 5.8.x
What's New In CDH 5.7.x
What's New In CDH 5.6.x
What's New In CDH 5.5.x
What's New In CDH 5.4.x
What's New In CDH 5.3.x
What's New In CDH 5.2.x
What's New in CDH 5.1.x
What's New in CDH 5.0.x
What's New In CDH 5 Beta Releases
What's New in Apache Impala
What's New in Apache Kudu


Incompatible Changes and Limitations

Apache Avro Incompatible Changes and Limitations
Apache Crunch Incompatible Changes and Limitations
Apache DataFu Incompatible Changes and Limitations
Apache Flume Incompatible Changes and Limitations
Apache Hadoop Incompatible Changes and Limitations
Apache HBase Incompatible Changes and Limitations
Apache Hive Incompatible Changes and Limitations
Hue Incompatible Changes and Limitations
Apache Impala Incompatible Changes and Limitations
Cloudera Distribution of Apache Kafka Incompatible Changes and Limitations
Kite Incompatible Changes and Limitations
Apache Kudu Incompatible Changes and Limitations
Llama Incompatible Changes and Limitations
Apache Mahout Incompatible Changes and Limitations
Apache Oozie Incompatible Changes and Limitations
Apache Pig Incompatible Changes and Limitations
Cloudera Search Incompatible Changes and Limitations
Apache Sentry Incompatible Changes
Apache Spark Incompatible Changes and Limitations
Apache Sqoop Incompatible Changes and Limitations
Apache Whirr Incompatible Changes and Limitations
Apache ZooKeeper Incompatible Changes and Limitations


Known Issues in CDH 5

Operating System Known Issues
Performance Known Issues
Install and Upgrade Known Issues
Apache Avro Known Issues
Apache Flume Known Issues
Apache Hadoop Known Issues
Apache HBase Known Issues
Apache Hive Known Issues
Hue Known Issues
Apache Impala Known Issues
Cloudera Distribution of Apache Kafka Known Issues
Apache Kudu Known Issues
Apache Mahout Known Issues
Apache Oozie Known Issues
Apache Parquet Known Issues
Apache Pig Known Issues
Cloudera Search Known Issues
Apache Sentry Known Issues
Apache Spark Known Issues
Apache Sqoop Known Issues
Apache Phoenix Known Issues
Apache ZooKeeper Known Issues


Issues Fixed in CDH 5

Issues Fixed in CDH 5.16.x
Issues Fixed in CDH 5.15.x
Issues Fixed in CDH 5.14.x
Issues Fixed in CDH 5.13.x
Issues Fixed in CDH 5.12.x
Issues Fixed in CDH 5.11.x
Issues Fixed in CDH 5.10.x
Issues Fixed in CDH 5.9.x
Issues Fixed in CDH 5.8.x
Issues Fixed in CDH 5.7.x
Issues Fixed in CDH 5.6.x
Issues Fixed in CDH 5.5.x
Issues Fixed in CDH 5.4.x
Issues Fixed in CDH 5.3.x
Issues Fixed in CDH 5.2.x
Issues Fixed in CDH 5.1.x
Issues Fixed in CDH 5.0.x
Issues Fixed in CDH 5 Beta Releases
Fixed Issues in Apache Impala
Issues Fixed in Apache Kudu




Cloudera Manager 5 Release Notes

New Features and Changes in Cloudera Manager 5
Known Issues and Workarounds in Cloudera Manager 5
Issues Fixed in Cloudera Manager 5


Cloudera Navigator Data Management Release Notes

New Features and Changes in Cloudera Navigator Data Management
Known Issues and Workarounds in Cloudera Navigator Data Management
Issues Fixed in Cloudera Navigator Data Management


Cloudera Navigator Key Trustee Server Release Notes

New Features and Changes in Cloudera Navigator Key Trustee Server
Known Issues and Workarounds in Cloudera Navigator Key Trustee Server
Issues Fixed in Cloudera Navigator Key Trustee Server


Cloudera Navigator Key HSM Release Notes

New Features and Changes in Cloudera Navigator Key HSM
Known Issues and Workarounds in Cloudera Navigator Key HSM
Issues Fixed in Cloudera Navigator Key HSM


Key Trustee KMS Release Notes

New Features in Key Trustee KMS
Known Issues and Workarounds in Key Trustee KMS
Issues Fixed in Key Trustee KMS


Cloudera Navigator HSM KMS Release Notes

New Features and Changes in Cloudera Navigator HSM KMS
Known Issues and Workarounds in Cloudera Navigator HSM KMS
Issues Fixed in Cloudera Navigator HSM KMS


Cloudera Navigator Encrypt Release Notes

New Features and Changes in Cloudera Navigator Encrypt
Known Issues and Workarounds in Cloudera Navigator Encrypt
Issues Fixed in Cloudera Navigator Encrypt


Deprecated Items





To read this documentation, you must turn JavaScript on.




Operating System Known Issues

Known issues and workarounds related to operating systems are listed below.

Continue reading:

Kerberos credentials cache issue on keyring-enabled configurations
YARN failure due to Debian 8 kernel limitation
Linux kernel security patch and CDH services crashes
Some OS versions reject weak ciphers for TLS
SUSE Linux Enterprise Server 12 (SLES12) and Kerberos Credential Cache Issue
Random JVM Hangs on RHEL 6.6 (Kernels 3.14-3.17)
Leap-Second Events




Kerberos credentials cache issue on keyring-enabled configurations

Some operating system configurations use keyring as the default storage for the Kerberos credential cache. This configuration may cause authentication failures for various components,
indicated by the error:
GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
Affected OS/version: 5.x
Cloudera Bug: CDH-70529
Workaround: Use a file-based Kerberos credentials cache configuration in krb5.conf. For details, refer to SUSE Linux Enterprise Server 12 (SLES12) and Kerberos Credential Cache Issue.



YARN failure due to Debian 8 kernel limitation

The Linux kernel for Debian 8 (Jessie) does not support the cgroup setting for cpu.cfs_period_us and causes failures such
as that shown in the log message below:

...DATE TIME FATAL NodeManager
Error starting NodeManager
org.apache.hadoop.yarn.exceptions.YarnRuntimeException: Failed to initialize container executor

at org.apache.hadoop.yarn.server.nodemanager.NodeManager.serviceInit(NodeManager.java:269)

at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
...

Bug: Debian 805498
Cloudera Bug: CDH-57554



Linux kernel security patch and CDH services crashes

After applying a recent Linux kernel security patch for CVE-2017-1000364, CDH
services that use the JSVC set of libraries crash with a Java Virtual Machine (JVM) error such as:
A fatal error has been detected by the Java Runtime Environment:
SIGBUS (0x7) at pc=0x00007fe91ef6cebc, pid=30321, tid=0x00007fe930c67700

Cloudera services for HDFS and Impala cannot start after applying the patch.
Important: If you have not upgraded your Linux kernel using the distribution's patch for CVE-2017-1000364, do not apply the patch.
Commonly used Linux distributions are shown in the table below. However, the issue affects any CDH release that runs on RHEL, CentOS, Oracle Linux, SUSE Linux, or Ubuntu and that has had
the Linux kernel security patch for CVE-2017-1000364 applied.
If you have already applied the patch for your OS according to the advisories for CVE-2017-1000364, apply the kernel update that contains the fix for your operating system (some of which
are listed in the table). If you cannot apply the kernel update, you can workaround the issue by increasing the Java thread stack size as detailed in the steps below.




Distribution
Advisories for CVE-2017-1000364
Advisory updates




Oracle Linux 6
ELSA-2017-1486
Oracle has fixed this problem in ELSA-2017-1723.


Oracle Linux 7
ELSA-2017-1484
Oracle has also added the fix for Oracle Linux 7 in ELBA-2017-1674.


RHEL 6
RHSA-2017-1486
RedHat has fixed this problem for RHEL 6, marked this as outdated and superseded by RHSA-2017-1723.


RHEL 7
RHSA-2017-1484
RedHat has fixed this problem for RHEL 7 and has marked this patch as outdated and superseded by
RHBA-2017-1674.


SUSE
CVE-2017-1000364
SUSE has also fixed this problem and the patch names are included in this same advisory.


Ubuntu 14.04
USN-3335-1
Fixed in USN-3338-2.






Workaround

If you cannot apply the kernel update, you can set the Java thread stack size to -Xss1280k for the affected services using the appropriate Java
configuration option or the environment advanced configuration snippet, as detailed below.
For role instances that have specific Java configuration options properties:


Log in to Cloudera Manager Admin Console.
Select Clusters > Impala, and then click the Configuration tab.
Type java in the search field to display Java related configuration parameters. The Java Configuration Options for Catalog
Server property field displays. Type -Xss1280k in the entry field, adding to any existing settings.
Click Save Changes.
Navigate to the HDFS service by selecting Clusters > HDFS.
Click the Configuration tab.
Click the Scope filter DataNode. The Java Configuration Options for DataNode field displays among the properties
listed. Enter -Xss1280k into the field, adding to any existing properties.
Click Save Changes.
Select the Scope filter NFS Gateway. The Java Configuration Options for NFS Gateway field displays among the
properties listed. Enter -Xss1280k into the field, adding to any existing properties.
Click Save Changes.
Restart the affected roles (or configure the safety valves in next section and restart when finished with all configurations).


For role instances that do not have specific Java configuration options:

Log in to Cloudera Manager Admin Console.
Select Clusters > Impala, and then click the Configuration tab.
Click the Scope filter Impala Daemon and Category filter Advanced.
Type impala daemon environment in the search field to find the safety valve entry field.
In the Impala Daemon Environment Advanced Configuration Snippet (Safety Valve), enter:
JAVA_TOOL_OPTIONS=-Xss1280K
Click Save Changes.
Click the Scope filter Impala StateStore and Category filter Advanced.
In the Impala StateStore Environment Advanced Configuration Snippet (Safety Valve), enter:
JAVA_TOOL_OPTIONS=-Xss1280K
Click Save Changes.
Restart the affected roles.

The table below summarizes the parameters that can be set for the affected services:




Service
Settable Java Configuration Option




HDFS DataNode
Java Configuration Options for DataNode


HDFS NFS Gateway
Java Configuration Options for NFS Gateway


Impala Catalog Server
Java Configuration Options for Catalog Server


Impala Daemon
Impala Daemon Environment Advanced Configuration Snippet (Safety Valve)


JAVA_TOOL_OPTIONS=-Xss1280K


Impala StateStore
Impala StateStore Environment Advanced Configuration Snippet (Safety Valve)


JAVA_TOOL_OPTIONS=-Xss1280K




Cloudera Bug: CDH-55771




Some OS versions reject weak ciphers for TLS

For some OS configurations, the curl command cannot connect to certain CDH services that run on Apache Tomcat when the cluster has been configured for
TLS/SSL. Specifically, HttpFS, KMS, Oozie, and Solr services reject connection attempts because the default cipher configuration uses weak temporary server keys (based on Diffie-Hellman key exchange
protocol).

Affected OS/version: Linux distributions that use network security services (nss) library version 3.28.4-3.el6_9, including Oracle Linux 6.x, RHEL 6.x,
CentOS 6.x. These conflict with Tomcat 6.0.48, which is included with CDH 5.11. The issue has been resolved in CDH 5.11.1.
Workaround: Override the default cipher configuration using all the ciphers from the list below. Only commas separate each cipher, and there are no line
endings or other characters in this list.


For clusters not managed by Cloudera Manager, enter this list in the appropriate configuration file for the service (see the "Not managed" column in the table below). Restart the
service.

TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDH_RSA_WITH_AES_256_CBC_SHA,TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDH_RSA_WITH_AES_128_CBC_SHA,TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_3DES_EDE_CBC_SHA

For clusters managed by Cloudera Manager, follow the steps below.






 
Cluster managed by Cloudera Manager
Not managed


Service
Configuration property
Environment variable
Configuration file




HttpFS
HttpFS Environment Advanced Configuration Snippet (Safety Valve)
HTTPFS_SSL_CIPHERS
/etc/hadoop-httpfs/conf/httpfs-env.sh


KMS
Key Management Server Environment Advanced Configuration Snippet (Safety Valve)
KMS_SSL_CIPHERS
/etc/hadoop-kms/conf/kms-env.sh


Oozie
Oozie Server Environment Advanced Configuration Snippet
OOZIE_HTTPS_CIPHERS
/etc/oozie/conf/oozie-env.sh


Solr
Solr Server Environment Advanced Configuration Snippet
SOLR_CIPHERS_CONFIG
/etc/default/solr




To override the ciphers on Cloudera Manager clusters:

Log into Cloudera Manager Admin Console.
Search for the advanced configuration snippet name ("Configuration property") for each respective service role.
Enter the appropriate environment variable in the entry field.
Copy the list from here:

TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDH_RSA_WITH_AES_256_CBC_SHA,TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDH_RSA_WITH_AES_128_CBC_SHA,TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA256,TLS_RSA_WITH_AES_256_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA256,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_3DES_EDE_CBC_SHA

Paste as the setting for the environment variable. For example, overriding HttpFS is as follows:




Restart the service.

Cloudera Bugs: CDH-52109, CDH-49236



SUSE Linux Enterprise Server 12 (SLES12) and Kerberos Credential Cache Issue

Cloudera has become aware of a conflict in the handling of the Kerberos credential cache in SLES12 that can result in the following error:

Credential cache directory /run/user/uid does not exist

The issue is caused by a change in SLES12 systemd and the location of Kerberos credentials cache for user accounts. This issue may emerge when
password-less accounts, such as impala or flume, for example, are executed using sudo -u user or su - user and the system attempts to retrieve the credential from the cache.
Workaround:
To work around this issue, add the following line to your system's Kerberos configuration file (/etc/krb5.conf), in the [libdefaults] section:

[libdefaults]
default_ccache_name = FILE:/tmp/krb5cc_%{uid}
...

For clusters managed by Cloudera Manager Server:

Log in to Cloudera Manager Admin Console.
Click the Administration tab and select Settings from the drop-down menu.
Select Kerberos for the Category filter.
Type the word "safety" in the Search field to find the Advanced Configuration Snippet (Safety Valve) settings for Kerberos.
Enter the name=value pair for the property as shown here:


Click Save Changes.

Cloudera Bugs: OPSAPS-34167, OPSAPS-41158



Random JVM Hangs on RHEL 6.6 (Kernels 3.14-3.17)

User Java processes—HBase RegionServers, HDFS DataNodes—can deadlock and hang for no apparent reason.
Impact: A Java application or daemon hangs. A jstack, or attaching a debugger, can unblock the process.
Workaround:
Upgrade the operating system to one with kernel version 3.18 or later; for example, RHEL 6.6z and later. For information on checking your RHEL kernel version, see http://www.cyberciti.biz/faq/centsos-redhat-rhel-6-kernel-version/. In RHEL, the issue has been fixed recently
in kernel-2.6.32-504.16.2.el6 update (April 21, https://rhn.redhat.com/errata/RHSA-2015-0864.html). The
following example shows how to check for the fix:
% rpm -qp --changelog kernel-2.6.32-504.16.2.el6.x86_64.rpm | grep 'Ensure get_futex_key_refs() always implies a barrier'
Other distributions running kernel versions 3.14-3.17 may be affected.
For more information, see https://groups.google.com/forum/#!topic/mechanical-sympathy/QbmpZxp6C64
Cloudera Bug: TSB-63



Leap-Second Events


Note: The next leap-second event is unknown at
this time. The last leap-second event occurred on December 16, 2016 at 23:59:60 UTC.

Impact: After a leap-second event, Java applications (including CDH services) using older Java and Linux kernel versions, may consume almost 100% CPU. See
https://access.redhat.com/articles/15145.
Leap-second events are tied to the time synchronization methods of the Linux kernel, the Linux distribution and version, and the Java version used by applications running on affected
kernels.
Although Java is increasingly agnostic to system clock progression (and less susceptible to a kernel's mishandling of a leap-second event), using JDK 7 or 8 should prevent issues at the
CDH level (for CDH components that use the Java Virtual Machine).
Immediate action required:
(1) Ensure that the kernel is up to date.


RHEL5/6/7, CentOS 5/6/7 - 2.6.32-298 or higher


Ubuntu Trusty 14.04 LTS - No action required


Ubuntu Precise 12.04 LTS - 3.2.0-29.46 or higher


Debian Jessie (8.x)- No action required


Debian Wheezy (7.x) - 3.2.29-1 or higher


Oracle Enterprise Linux (OEL) - Kernels built in 2013 or later


SLES11 (SP2, SP3 and SP4)


SP2 - 3.0.38-0.5 or higher


SP3 and SP4 - No action required




SLES12 - No action required.


(2) Ensure that your Java JDKs are current (especially if the kernel is not up to date and cannot be upgraded).


Java 7 - At least jdk-1.7.0_65


Java 8 - No action required.



(3) Ensure that your systems use either NTP or PTP synchronization.
For systems not using time synchronization, update both the OS tzdata and Java tzdata packages to the tzdata-2016g version, at a minimum. For OS tzdata package updates, contact OS
support or check updated OS repositories. For Java tzdata package updates, see Oracle's Timezone Updater Tool.
Cloudera Bugs: CDH-44788, TSB-189



Categories: CDH | Known Issues | Linux | Release Notes | Troubleshooting | Upgrading | All Categories



Known Issues in CDH 5


Performance Known Issues


















About Cloudera
Resources
Contact
Careers
Press
Documentation

United States: +1 888 789 1488
Outside the US: +1 650 362 0488



© 2021 Cloudera, Inc. All rights reserved. Apache Hadoop and associated open source project names are trademarks of the Apache Software Foundation. For a complete list of trademarks, click here.
If this documentation includes code, including but not limited to, code examples, Cloudera makes this available to you under the terms of the Apache License, Version 2.0, including any required
notices. A copy of the Apache License Version 2.0 can be found here.










Terms & Conditions  |  Privacy Policy

Page generated May 20, 2021.












